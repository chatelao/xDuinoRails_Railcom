# RailCom Protocol Message Examples

This document provides concrete examples of RailCom messages, showing the data at each stage of the encoding process from the initial DCC trigger to the final encoded bytes sent over the Railcom channel.

| Example DCC payload received or trigger cause | Railcom Channel used | Message type used | ID value | Format & Payload bit / byte values | Resulting bits (Pre encoding) | Resulting bits (Post encoding) |
|---|---|---|---|---|---|---|
| DCC POM Read CV 29 from decoder. Decoder responds with value 42 (0x2A). | 2 | POM | 0 | Payload is 1 byte, `0x2A`. | 12 bits total. 4 bits for the ID (`0000`) followed by 8 bits for the payload (`00101010`). The full pre-encoded value is `0000_00101010`. This is split into two 6-bit chunks: `000000` (value 0) and `101010` (value 42). | The two 6-bit chunks are encoded using the 4-of-8 table. The chunk `000000` (value 0) encodes to `0x0F`. The chunk `101010` (value 42) encodes to `0x99`. The final transmitted bytes are `0x0F 0x99`. |
| DCC packet addressed to short address 3 is sent on the track. | 1 | ADR | 1 | The payload is the 7-bit address, `3` (`0000011`). | The message ID for a short address is `ADR_HIGH` (1). The pre-encoded value is 11 bits: 4 bits for the ID (`0001`) followed by 7 bits for the address (`0000011`). The value is right-padded with a 0 to make it 12 bits (`000100000110`). This is split into two 6-bit chunks: `000100` (value 4) and `000110` (value 6). | The two 6-bit chunks are encoded using the 4-of-8 table. The chunk `000100` (value 4) encodes to `0x1E`. The chunk `000110` (value 6) encodes to `0x2B`. The final transmitted bytes are `0x1E 0x2B`. |
| Decoder spontaneously reports its speed is 100. | 2 | DYN | 7 | The payload combines a SubIndex (0 for speed) and the value (100). The combined 14-bit payload is `01100100000000` (value 6400). | The message ID is `DYN` (7). The pre-encoded value is 18 bits: 4 bits for ID (`0111`) followed by the 14-bit payload. The full value is `0111_01100100000000`. This is split into three 6-bit chunks: `011101` (value 29), `100100` (value 36), and `000000` (value 0). | The three 6-bit chunks are encoded using the 4-of-8 table. `011101` (29) -> `0x6A`. `100100` (36) -> `0x8B`. `000000` (0) -> `0x0F`. The final transmitted bytes are `0x6A 0x8B 0x0F`. |
| DCC XPOM Read for CVs 1-4. Decoder responds with values 1,2,3,4. (Note: distinguished from STAT2 by its 36-bit length). | 2 | XPOM | 8 | Payload is 4 bytes: `0x01`, `0x02`, `0x03`, `0x04`. | 36 bits total. 4 bits for ID (`1000`) followed by 32 bits for payload. The full value is `1000_00000001_00000010_00000011_00000100`. This is split into six 6-bit chunks. | The six 6-bit chunks are encoded using the 4-of-8 table. The final transmitted bytes are `0x83 0x05 0x0C 0x18 0x60 0x40`. |
| Accessory decoder with address 10 requests service. | 1 | SRQ | N/A | 11-bit accessory address `10` (`00000001010`) and a bit indicating it's not an extended address. The 12-bit payload is formed by combining the address and the extended flag, resulting in `000000001010`. | This 12-bit payload is split into two 6-bit chunks: `000000` (value 0) and `001010` (value 10). | The two 6-bit chunks are encoded using the 4-of-8 table. `000000` (0) -> `0x0F`. `001010` (10) -> `0x35`. The final transmitted bytes are `0x0F 0x35`. |
| Accessory decoder reports status `0xAB`. | 2 | STAT1 | 4 | Payload is 1 byte, `0xAB`. | 12 bits total. 4 bits for the ID (`0100`) followed by 8 bits for the payload (`10101011`). The full pre-encoded value is `0100_10101011`. This is split into two 6-bit chunks: `010010` (value 18) and `101011` (value 43). | The two 6-bit chunks are encoded using the 4-of-8 table. `010010` (18) -> `0x4E`. `101011` (43) -> `0x9A`. The final transmitted bytes are `0x4E 0x9A`. |
| Accessory decoder reports status `0xCD`. | 2 | STAT4 | 3 | Payload is 1 byte, `0xCD`. | 12 bits total. 4 bits for the ID (`0011`) followed by 8 bits for the payload (`11001101`). The full pre-encoded value is `0011_11001101`. This is split into two 6-bit chunks: `001111` (value 15) and `001101` (value 13). | The two 6-bit chunks are encoded using the 4-of-8 table. `001111` (15) -> `0x47`. `001101` (13) -> `0x3A`. The final transmitted bytes are `0x47 0x3A`. |
| Accessory decoder reports error `0xEF`. | 2 | ERROR | 6 | Payload is 1 byte, `0xEF`. | 12 bits total. 4 bits for the ID (`0110`) followed by 8 bits for the payload (`11101111`). The full pre-encoded value is `0110_11101111`. This is split into two 6-bit chunks: `011011` (value 27) and `101111` (value 47). | The two 6-bit chunks are encoded using the 4-of-8 table. `011011` (27) -> `0x66`. `101111` (47) -> `0xA6`. The final transmitted bytes are `0x66 0xA6`. |
| Mechanical accessory decoder reports its status. (Note: distinguished from XPOM by its 12-bit length). | 2 | STAT2 | 8 | Payload is 1 byte. The upper 4 bits are the configuration (e.g., `0001` for a turnout) and the lower 4 bits are the status (e.g., `0001` for thrown). The payload is `00010001` (0x11). | 12 bits total. 4 bits for the ID (`1000`) followed by 8 bits for the payload (`00010001`). The full pre-encoded value is `1000_00010001`. This is split into two 6-bit chunks: `100000` (value 32) and `010001` (value 17). | The two 6-bit chunks are encoded using the 4-of-8 table. `100000` (32) -> `0x72`. `010001` (17) -> `0x4D`. The final transmitted bytes are `0x72 0x4D`. |

**Note:** The message types `Info1`, `EXT`, `CV-Car`, and `TIME` are defined in the RCN-217 specification, but their payload formats are not detailed in the available documentation or implemented in the source code. Therefore, examples for these message types have not been included.
